---
title: Service Intent must be explicit Exception - Lollipop v21/v22 error trying to update Liveview plugin to base SDK
layout: post
date: 2015-03-15 01:09:00 UTC
updated: 2015-03-15 01:10:40 UTC
comments: false
categories: Android LiveView
---
Base fix:<br /><br />You need to add that <a href="https://gist.github.com/danielgomezrico/44f081fbdf7ed1f176f1">IntentHelper.java</a> to your project and edit some lines about intent creation for the LiveView base classes...<br /><ul><li>Update 'connectToLiveView()' in AbstractPluginService.java to:</li></ul><ol></ol><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> /**  <br />    * Connects to the LiveView service.  <br />    */  <br />   private void connectToLiveView() {  <br />  <b>   Intent baseIntent = new Intent(PluginConstants.LIVEVIEW_SERVICE_BIND_INTENT);  <br />     Intent explicitIntent = IntentHelper.createExplicitFromImplicitIntent(getApplicationContext(), baseIntent);  <br />     final boolean result = bindService(explicitIntent, mServiceConnection, 0);  <br />  </b>   if (result) {  <br />       Log.d(PluginConstants.LOG_TAG, "Bound to LiveView.");  <br />     } else {  <br />       Log.d(PluginConstants.LOG_TAG, "No bind.");  <br />       stopSelf();  <br />     }  <br />   }  <br /></code></pre><ul><li>Update PluginReceiver.java&nbsp;onReceive() to:</li></ul><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">   public void onReceive(final Context context, final Intent intent) {  <br />     final String command = intent.getExtras().getString(PluginConstants.BROADCAST_COMMAND);  <br />     Log.d(PluginConstants.LOG_TAG, "Received command: " + command);  <br />     if (command == null) {  <br />       return;  <br />     }  <br />     if (command.contentEquals(PluginConstants.BROADCAST_COMMAND_PREFERENCES)) {  <br />       final String pluginName = intent.getExtras().getString(PluginConstants.BROADCAST_COMMAND_PLUGIN_NAME);  <br />       final String myPluginName = PluginUtils.getDynamicResourceString(context, PluginConstants.RESOURCE_STRING_PLUGIN_NAME);  <br />       if (pluginName != null &amp;&amp; pluginName.contentEquals(myPluginName)) {  <br />         final String intentString = PluginUtils.getDynamicResourceString(context, PluginConstants.RESOURCE_STRING_INTENT_PREFS);  <br />         Log.d(PluginConstants.LOG_TAG, "Starting preferences! Intent: " + intentString);  <br />         final Intent prefsIntent = new Intent(intentString);  <br />         prefsIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  <br />         context.startActivity(prefsIntent);  <br />       }  <br />     } else if (command.contentEquals(PluginConstants.BROADCAST_COMMAND_START)) {  <br />       if (AbstractPluginService.isAlreadyRunning()) {  <br />         Log.d(PluginConstants.LOG_TAG, "Service is already running.");  <br />       } else {  <br />         final String serviceIntent = PluginUtils.getDynamicResourceString(context, PluginConstants.RESOURCE_STRING_INTENT_SERVICE);  <br />         Log.d(PluginConstants.LOG_TAG, "Starting service! Intent: " + serviceIntent);  <br />        <b> Intent service = IntentHelper.createExplicitFromImplicitIntent(context, new Intent(serviceIntent));  <br />         context.startService(service);  </b><br />       }  <br />     }  <br />   }  <br /></code></pre><br /><br />And now it should work :D<br /><br />