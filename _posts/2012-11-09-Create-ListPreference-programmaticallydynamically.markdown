---
title: Create ListPreference programmatically/dynamically
layout: post
date: 2012-11-09 21:34:00 UTC
updated: 2015-02-08 19:42:32 UTC
comments: false
categories: Android
---
NOTE: when you set the default value you must set a CharSequence  object, not a String, I don't know why but when you use String, even  with the same object, it dosen't work.<br /><br />Note to create a category and a listpreferences<br /><br />The class must extend&nbsp;PreferenceActivity and onCreate:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> PreferenceCategory mainCategory = new PreferenceCategory(this);  <br /> // Root  <br /> PreferenceScreen root = getPreferenceManager().createPreferenceScreen(this);  <br /> mainCategory.setTitle("Category Title");  <br /> root.addPreference(mainCategory); // Adding a category  <br /> CharSequence[] entries = {"Two", "One", "Other"};  <br /> // PREFERENCE device  <br /> final ListPreference listPref = new ListPreference(this);  <br /> listPref.setKey("keyDevice"); // Refer to get the pref value  <br /> listPref.setDefaultValue("One");  <br /> listPref.setEntries(entries);  <br /> listPref.setEntryValues(entries);  <br /> listPref.setDialogTitle("Title");  <br /> listPref.setTitle("Title 2");  <br /> listPref.setSummary("Summary");  <br /> mainCategory.addPreference(listPref); // Adding under the category  <br /> listPref.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {  <br />     public boolean onPreferenceChange(Preference preference, Object newValue) {  <br />     //newValue will be the entryValue for the entry selected  <br />     return true;  <br /> }  <br /> });  <br /> this.setPreferenceScreen(root);  <br /></code></pre><div class="p1"><br /><a href="http://stackoverflow.com/questions/5375363/dynamic-listpreference-in-android">Source</a></div><br />