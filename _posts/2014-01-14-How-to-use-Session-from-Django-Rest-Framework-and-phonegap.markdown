---
title: How to use Session from Django Rest Framework and phonegap
layout: post
date: 2014-01-14 12:36:00 UTC
updated: 2015-02-08 19:42:28 UTC
comments: false
categories: Django
---
Variables:  <br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> SESSION_COOKIE_AGE = 20000000 #Seconds  <br /> SESSION_COOKIE_NAME='sessionid'  <br /> SESSION_ENGINE = 'django.contrib.sessions.backends.db'  </code></pre><br /><br />1 WS Login (DJANGO - SERVER):<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> def login(request):  <br /> // Must return in someway request.session._session_key  <br /></code></pre><br /><br />2 (PHONEGAP - CLIENT ) Send in the request cookie the session id (based on SESSION_COOKIE_NAME), in this case is using phonegap and FileTransfer object:<br /><br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> // Specify transfer options  <br /> var options = new FileUploadOptions();  <br />   <br /> options.fileKey = "file";  <br /> options.fileName = "file.txt";  <br /> options.mimeType = "text/plain"  <br /> options.chunkedMode = false;//Streaming mode  <br /> options.headers = {  <br />   'Connection': "close",  <br />   <br />   // SESSION_ID must be the sessionid that the login ws returned  <br />   'Cookie':'sessionid=' + &lt;SESSION_ID&gt;   <br /> };  <br />   <br />   <br />   <br /> // Transfer picture to server  <br /> var ft = new FileTransfer();  <br />   <br /> // successCallback(image), failureCallback(image, error)  <br /> ft.upload(fileUri, url, successCallback, failureCallback,options);  <br /></code></pre><br /><br /><br />3 (DJANGO - SERVER):WS Authenticate (check if Session is valid):<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> def authenticate(request):  <br />   try:  <br />     session = Session.objects.get(session_key = request.session._session_key)  <br />     session.get_decoded()[auth.SESSION_KEY]  <br />     // If the code continue without exception the session is alive!<br />   except Session.DoesNotExist:  <br />     response_data = {'message':'Your login session has ended.', 'result':False}  <br /></code></pre>